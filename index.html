<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patto di Ferro</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        const Download = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Target = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
            </svg>
        );

        const Zap = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        function PattoDiFerro() {
            const [goal, setGoal] = useState('');
            const [targetDate, setTargetDate] = useState('');
            const [userName, setUserName] = useState('');
            const [previewUrl, setPreviewUrl] = useState('');
            const canvasRef = useRef(null);

            const generateImage = () => {
                const canvas = canvasRef.current;
                if (!canvas || !goal || !targetDate) return;

                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1920;

                const qrImage = new Image();
                qrImage.crossOrigin = 'anonymous';
                qrImage.src = 'https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://nicholasrubini.it&color=60a5fa&bgcolor=0a0e1a';
                
                const drawCanvas = (qrImg) => {
                    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    gradient.addColorStop(0, '#0a0e1a');
                    gradient.addColorStop(0.3, '#0f1d3d');
                    gradient.addColorStop(0.7, '#1a2642');
                    gradient.addColorStop(1, '#050810');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    ctx.strokeStyle = 'rgba(100, 150, 255, 0.06)';
                    ctx.lineWidth = 2;
                    const chevronSize = 60;
                    for (let y = 0; y < canvas.hei
